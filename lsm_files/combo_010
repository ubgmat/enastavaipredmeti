YUI.add("moodle-core-widget-focusafterclose",function(t,e){function i(){t.after(this._bindUIFocusAfterHide,this,"bindUI"),this.get("rendered")&&this._bindUIFocusAfterHide()}i.ATTRS={focusOnPreviousTargetAfterHide:{value:!1},focusAfterHide:{value:null,type:t.Node}},i.prototype={_uiHandlesFocusAfterHide:[],_showFocusAfterHide:null,_previousTargetFocusAfterHide:null,initializer:function(){this.get("focusOnPreviousTargetAfterHide")&&this.show&&(this._showFocusAfterHide=this.show,this.show=function(e){this._showFocusAfterHide.apply(this,arguments),this._previousTargetFocusAfterHide=null,e&&e.currentTarget&&(this._previousTargetFocusAfterHide=e.currentTarget)})},destructor:function(){new t.EventHandle(this.uiHandleFocusAfterHide).detach()},_bindUIFocusAfterHide:function(){new t.EventHandle(this.uiHandleFocusAfterHide).detach(),this.uiHandleFocusAfterHide=[this.after("visibleChange",this._afterHostVisibleChangeFocusAfterHide)]},_afterHostVisibleChangeFocusAfterHide:function(){this.get("visible")||this._attemptFocus(this._previousTargetFocusAfterHide)||this._attemptFocus(this.get("focusAfterHide"))},_attemptFocus:function(e){e=t.one(e);return!!(e=e&&e.ancestor('input:not([type="hidden"]), a[href], button, textarea, select, [tabindex], [contenteditable="true"]',!0))&&(e.focus(),!0)}},t.namespace("M.core").WidgetFocusAfterHide=i},"@VERSION@",{requires:["base-build","widget"]});/*
YUI 3.17.2 (build 9c3c78e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},onceHostEvent:function(e,t,n){var r=this.get("host").once(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},onceAfterHostEvent:function(e,t,n){var r=this.get("host").onceAfter(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"3.17.2",{requires:["base-base"]});
YUI.add("moodle-core-lockscroll",function(l,t){l.namespace("M.core").LockScroll=l.Base.create("lockScroll",l.Plugin.Base,[],{_enabled:!1,destructor:function(){this.disableScrollLock()},enableScrollLock:function(t){var e,o;if(!this.isActive()&&this.shouldLockScroll(t))return this._enabled=!0,e=(t=l.one(l.config.doc.body)).getComputedStyle("width"),t.addClass("lockscroll"),o=parseInt(t.getAttribute("data-activeScrollLocks"),10)||0,t.setAttribute("data-activeScrollLocks",o+1),0===o&&t.setStyle("maxWidth",e),this},shouldLockScroll:function(t){var e=this.get("host").get("boundingBox").get("region").height,o=l.config.win.innerHeight||l.config.doc.documentElement.clientHeight||0;return!(!t&&o-10<e)},updateScrollLock:function(t){return this.shouldLockScroll(t)?this.enableScrollLock(t):this.disableScrollLock(!0),this},disableScrollLock:function(t){var e,o;return this.isActive()&&(this._enabled=!1,e=l.one(l.config.doc.body),o=parseInt(e.getAttribute("data-activeScrollLocks"),10)||1,!t&&1!==o||(e.removeClass("lockscroll"),e.setStyle("maxWidth",null)),e.setAttribute("data-activeScrollLocks",o-1)),this},isActive:function(){return this._enabled}},{NS:"lockScroll",ATTRS:{}})},"@VERSION@",{requires:["plugin","base-build"]});YUI.add("moodle-core-notification-dialogue",function(s,h){var u,i,t,n,a,l,e,o="moodle-dialogue",d="notificationBase",r={BASE:"moodle-dialogue-base",WRAP:"moodle-dialogue-wrap",HEADER:"moodle-dialogue-hd",BODY:"moodle-dialogue-bd",CONTENT:"moodle-dialogue-content",FOOTER:"moodle-dialogue-ft",HIDDEN:"hidden",LIGHTBOX:"moodle-dialogue-lightbox"};M.core=M.core||{},t=o+"-fullscreen",n=o+"-hidden",a="moodle-has-zindex",s.extend(i=function(e){var t="moodle-dialogue-"+s.stamp(this)+"-wrap";e.notificationBase=s.Node.create('<div class="'+r.BASE+'">').append(s.Node.create('<div id="'+t+'" role="dialog" aria-labelledby="'+t+'-header-text" class="'+r.WRAP+'"  aria-live="polite"></div>').append(s.Node.create('<div class="'+r.HEADER+' yui3-widget-hd"></div>')).append(s.Node.create('<div class="'+r.BODY+' yui3-widget-bd"></div>')).append(s.Node.create('<div class="'+r.FOOTER+' yui3-widget-ft"></div>'))),e.attachmentPoint=e.attachmentPoint||document.body,s.one(e.attachmentPoint).append(e.notificationBase),e.srcNode="#"+t,delete e.buttons,i.superclass.constructor.apply(this,[e])},s.Panel,{_resizeevent:null,_orientationevent:null,_calculatedzindex:!"form",_currentMaskNodeId:null,_originalPosition:null,_hiddenSiblings:null,hideIfNotForm:function(){null===this.get("boundingBox").one("form")&&this.hide()},initializer:function(){var e,t;!1!==this.get("closeButton")&&(e=this.get("closeButtonTitle"),this.get("buttons").header[0].setAttribute("title",e),this.get("buttons").header[0].setAttribute("aria-label",e)),this.setStdModContent(s.WidgetStdMod.HEADER,'<h5 id="'+this.get("id")+'-wrap-header-text">'+this.get("headerContent")+"</h5>",s.WidgetStdMod.REPLACE),this._hiddenSiblings=[],this.get("render")&&this.render(),this.after("visibleChange",this.visibilityChanged,this),this.get("center")&&this.centerDialogue(),this.get("modal")&&(this.get(d).set("aria-hidden","true"),this.plug(s.M.core.LockScroll)),this.set("focusOn",s.Array(this.get("focusOn")).filter(function(e){return"focusoutside"!==e.eventName})),s.one("document").on("orientationchange",function(){this.centerDialogOnVisible()},this),s.one("window").on("resize",function(){this.centerDialogOnVisible()},this),this.centerDialogOnDialogSizeChange(this),(e=this.get("boundingBox")).addClass(a),s.Array.each(this.get("extraClasses"),e.addClass,e),this.get("visible")&&(this.applyZIndex(),this.applyAndTrapFocus(),this.get("modal")&&this.setAccessibilityVisible()),this.on("maskShow",this.applyZIndex),this.on("maskShow",function(){var e,t=s.one(s.config.win),i=this.get("boundingBox");this.get("center")||(this._originalPosition=i.getXY()),e=this.get("maskNode"),this._currentMaskNodeId!==e.get("_yuid")&&(this._currentMaskNodeId=e.get("_yuid"),e.on("click",this.hideIfNotForm,this)),"fixed"!==i.getStyle("position")&&i.setStyles({top:t.get("scrollTop"),left:t.get("scrollLeft")})},this),e=this.get("notificationBase"),""!==(t=this.get("additionalBaseClass"))&&e.addClass(t),this.after("destroyedChange",function(){this.get(d).remove(!0)},this)},applyZIndex:function(){var e,t=1040,i=this.get("boundingBox"),o=this.get("maskNode"),n=this.get("zIndex");0===n||this._calculatedzindex?(s.all(" [role=dialog], [role=menubar], ."+a).each(function(e){e=this.findZIndex(e);t<e&&(t=e)},this),e=(t+1).toString(),i.setStyle("zIndex",e),this.set("zIndex",e),this.get("modal")&&(o.setStyle("zIndex",e),s.UA.ie&&s.UA.compareVersions(s.UA.ie,9)<0&&setTimeout(function(){o.setStyle("position","static"),setTimeout(function(){o.setStyle("position","fixed")},0)},0)),this._calculatedzindex=!0):i.setStyle("zIndex",n)},findZIndex:function(e){e=e.getStyle("zIndex")||e.ancestor().getStyle("zIndex");return e?parseInt(e,10):0},visibilityChanged:function(e){var t;"visible"===e.attrName&&(this.get("maskNode").addClass(r.LIGHTBOX),e.prevVal&&!e.newVal&&(this.get("boundingBox"),this._resizeevent&&(this._resizeevent.detach(),this._resizeevent=null),this._orientationevent&&(this._orientationevent.detach(),this._orientationevent=null),require(["core/local/aria/focuslock"],function(e){e.untrapFocus()}),this.get("modal")&&this.setAccessibilityHidden()),!e.prevVal&&e.newVal&&(this.applyZIndex(),this.makeResponsive(),this.shouldResizeFullscreen()||this.get("draggable")&&(t="#"+this.get("id")+" ."+r.HEADER,this.plug(s.Plugin.Drag,{handles:[t]}),s.one(t).setStyle("cursor","move")),this.get("modal")&&this.setAccessibilityVisible()),this.get("center")&&!e.prevVal&&e.newVal&&this.centerDialogue())},makeResponsive:function(){var e=this.get("boundingBox");this.shouldResizeFullscreen()?(e.addClass(t),e.setStyles({left:null,top:null,width:null,height:null,right:null,bottom:null})):this.get("responsive")&&e.removeClass(t).setStyles({width:this.get("width"),height:this.get("height")}),this.lockScroll&&this.lockScroll.updateScrollLock(this.shouldResizeFullscreen())},centerDialogue:function(){var e,t,i=this.get("boundingBox"),o=i.hasClass(n);this.shouldResizeFullscreen()||(o&&i.setStyle("top","-1000px").removeClass(n),e=Math.max(Math.round((i.get("winWidth")-i.get("offsetWidth"))/2),15),t=Math.max(Math.round((i.get("winHeight")-i.get("offsetHeight"))/2),15)+s.one(window).get("scrollTop"),i.setStyles({left:e,top:t}),o&&i.addClass(n),this.makeResponsive())},centerDialogOnDialogSizeChange:function(e){var t=new ResizeObserver(function(){e.centerDialogOnVisible()}),i=e.get("boundingBox");t.observe(i._node,{attributes:!0,attributeFilter:["class"]})},centerDialogOnVisible:function(){this.get("visible")&&this.name===u&&(this.shouldResizeFullscreen()&&this.makeResponsive(),this.centerDialogue())},shouldResizeFullscreen:function(){return window===window.parent&&this.get("responsive")&&Math.floor(s.one(document.body).get("winWidth"))<this.get("responsiveWidth")},_focus:function(){this.focus()},show:function(){var e=i.superclass.show.call(this);return!this.get("center")&&this._originalPosition&&this.get("boundingBox").setXY(this._originalPosition),this.applyAndTrapFocus(),e},hide:function(e){if(!e||"key"!==e.type||27!==e.keyCode||this.get(
"focused"))return this.lockScroll&&this.lockScroll.disableScrollLock(),i.superclass.hide.call(this,arguments)},keyDelegation:function(){this.get("boundingBox").delegate("key",function(e){var t=e.target,i="forward";e.shiftKey&&(i="backward"),this.trapFocus(t,i)&&e.preventDefault()},"down:9",l,this)},trapFocus:function(e,t){var i=this.get("boundingBox"),o=i.one(l),i=i.all(l).pop();return e===i&&"forward"===t?o.focus():e===o&&"backward"===t?i.focus():void 0},setAccessibilityVisible:function(){var i=this.get(d);s.one(document.body).get("children").each(function(e){var t;e===i||"true"!==(t=e.get("aria-hidden"))&&(e.setData("previous-aria-hidden",t),this._hiddenSiblings.push(e),e.set("aria-hidden","true"))},this),i.set("aria-hidden","false")},setAccessibilityHidden:function(){this.get(d).set("aria-hidden","true"),s.Array.each(this._hiddenSiblings,function(e){var t=e.getData("previous-aria-hidden");null===t?e.removeAttribute("aria-hidden"):e.set("aria-hidden",t)}),this._hiddenSiblings=[]},applyAndTrapFocus:function(){var e=this.bodyNode,t=this.get("focusOnShowSelector"),i=null;(i=null!==t?this.get("boundingBox").one(t):i)||e&&""!==e&&(i=e.one(l)),require(["core/local/aria/focuslock"],function(e){e.trapFocus(this.get("boundingBox").getDOMNode()),i&&i.focus()}.bind(this))}},{NAME:u="Moodle dialogue",CSS_PREFIX:o,ATTRS:{additionalBaseClass:{value:""},notificationBase:{},lightbox:{lazyAdd:!(l='input:not([type="hidden"]):not([disabled]):not([tabindex^="-"]),a[href]:not([disabled]):not([tabindex^="-"]),button:not([disabled]):not([tabindex^="-"]),textarea:not([disabled]):not([tabindex^="-"]),select:not([disabled]):not([tabindex^="-"]),[tabindex]:not([disabled]):not([tabindex^="-"])'),setter:function(e){this.set("modal",e)}},closeButton:{validator:s.Lang.isBoolean,value:!0},closeButtonTitle:{validator:s.Lang.isString,value:M.util.get_string("closebuttontitle","moodle")},center:{validator:s.Lang.isBoolean,value:!0},draggable:{validator:s.Lang.isBoolean,value:!1},COUNT:{writeOnce:!0,valueFn:function(){return s.stamp(this)}},responsive:{validator:s.Lang.isBoolean,value:!0},responsiveWidth:{value:768},focusOnShowSelector:{value:null}}}),s.Base.modifyAttrs(i,{width:{value:"400px",setter:function(e){return"auto"===e?"":e}},visible:{value:!1},centered:{setter:function(e){return e&&this.set("center",!0),!1}},render:{value:!0,writeOnce:!0},extraClasses:{value:[]},id:{writeOnce:!0,valueFn:function(){return"moodle-dialogue-"+s.stamp(this)}},buttons:{getter:s.WidgetButtons.prototype._getButtons,setter:s.WidgetButtons.prototype._setButtons,valueFn:function(){return!1===this.get("closeButton")?null:[{section:s.WidgetStdMod.HEADER,classNames:"closebutton",action:function(){this.hide()}}]}}}),s.Base.mix(i,[s.M.core.WidgetFocusAfterHide]),M.core.dialogue=i,s.extend(e=function(){e.superclass.constructor.apply(this,arguments)},M.core.dialogue,{initializer:function(){this.show()}},{NAME:"Moodle information dialogue",CSS_PREFIX:o}),s.Base.modifyAttrs(e,{modal:{validator:s.Lang.isBoolean,value:!0}}),M.core.notification=M.core.notification||{},M.core.notification.info=e},"@VERSION@",{requires:["base","node","panel","escape","event-key","dd-plugin","moodle-core-widget-focusafterclose","moodle-core-lockscroll"]});YUI.add("moodle-core-notification-exception",function(o,e){var a;M.core=M.core||{},o.extend(a=function(i){var t=o.mix({},i);t.width=t.width||M.cfg.developerdebug?Math.floor(o.one(document.body).get("winWidth")/3)+"px":null,t.closeButton=!0,o.Array.each(["message","name","fileName","lineNumber","stack"],function(e){t[e]=i[e]}),a.superclass.constructor.apply(this,[t])},M.core.notification.info,{_hideTimeout:null,_keypress:null,initializer:function(e){var i=this,t=this.get("hideTimeoutDelay"),a=M.util.get_string("labelsep","langconfig");this.get("notificationBase").addClass("moodle-dialogue-exception"),this.setStdModContent(o.WidgetStdMod.HEADER,'<h5 id="moodle-dialogue-'+this.get("COUNT")+'-wrap-header-text">'+o.Escape.html(e.name)+"</h5>",o.WidgetStdMod.REPLACE),e=o.Node.create('<div class="moodle-exception" data-rel="fatalerror"></div>').append(o.Node.create('<div class="moodle-exception-message">'+o.Escape.html(this.get("message"))+"</div>")).append(o.Node.create('<div class="moodle-exception-param hidden param-filename"><label>'+M.util.get_string("file","moodle")+a+"</label> "+o.Escape.html(this.get("fileName"))+"</div>")).append(o.Node.create('<div class="moodle-exception-param hidden param-linenumber"><label>'+M.util.get_string("line","debug")+a+"</label> "+o.Escape.html(this.get("lineNumber"))+"</div>")).append(o.Node.create('<div class="moodle-exception-param hidden param-stacktrace"><label>'+M.util.get_string("stacktrace","debug")+a+"</label> <pre>"+this.get("stack")+"</pre></div>")),M.cfg.developerdebug&&e.all(".moodle-exception-param").removeClass("hidden"),this.setStdModContent(o.WidgetStdMod.BODY,e,o.WidgetStdMod.REPLACE),t&&(this._hideTimeout=setTimeout(function(){i.hide()},t)),this.after("visibleChange",this.visibilityChanged,this),this._keypress=o.on("key",this.hide,window,"down:13,27",this),this.centerDialogue()},visibilityChanged:function(e){var i;"visible"===e.attrName&&e.prevVal&&!e.newVal&&(this._keypress&&this._keypress.detach(),i=this,setTimeout(function(){i.destroy()},1e3))}},{NAME:"Moodle exception",CSS_PREFIX:"moodle-dialogue",ATTRS:{message:{value:""},name:{value:""},fileName:{value:""},lineNumber:{value:""},stack:{setter:function(e){var i,t=o.Escape.html(e).split("\n"),a=new RegExp("^(.+)@("+M.cfg.wwwroot+")?(.{0,75}).*:(\\d+)$");for(i in t)t[i]=t[i].replace(a,"<div class='stacktrace-line'>ln: $4</div><div class='stacktrace-file'>$3</div><div class='stacktrace-call'>$1</div>");return t.join("\n")},value:""},hideTimeoutDelay:{validator:o.Lang.isNumber,value:null}}}),M.core.exception=a},"@VERSION@",{requires:["moodle-core-notification-dialogue"]});